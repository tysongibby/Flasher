@page "/"
@using Flasher.Shared.Data.Models;
@using Flasher.Web.Services.Interfaces;
<div class="">
    <div class="col">
        <div class="card">
            <div class="card-header"><h3>Question @*@FlashCards[CardIndex].Id*@ </h3></div>
            <div class="card-body">
                <h5>@FlashCardSide</h5>
                <p>@FlashCardBody</p>
            </div>
            <div class="card-footer">
                <div class="btn-group">
                    <button class="btn btn-primary" @onclick="FlipFlashCard">Show @ShowButton</button>
                    <button class="btn btn-success ml-4">Answered Correctly</button>
                    <button class="btn btn-outline-primary ml-4" @onclick="NextFlashCard">Next</button>
                </div>
            </div>
        </div>
    </div>
</div>

@code{
    [Inject]
    private IFlasherService FlasherService { get; set; }
    private List<FlashCard> FlashCards { get; set; } = new List<FlashCard>();
    private int CardIndex { get; set; } = 0;
    private bool Front { get; set; } = true;
    private string FlashCardSide { get; set; } = "Front";

    private string FlashCardBody { get; set; }
    private string ShowButton { get; set; } = "Back";

    //public Index(IFlasherService flasherService)
    //{
    //    FlasherService = flasherService;
    //}

    protected override async Task OnInitializedAsync()
    {
        //Console.WriteLine("OnIitializedAsync was called");
        FlashCards = await FlasherService.GetAll();
        Console.WriteLine($"FlashCard: {FlashCards[0].Id}, {FlashCards[0].Front}, {FlashCards[0].Back}");
        FlashCardBody = FlashCards[0].Front;

    }

    public void NextFlashCard()
    {
        if (CardIndex < FlashCards.Count - 1)
        {
            CardIndex++;
            if (Front)
            {
                FlashCardBody = FlashCards[CardIndex].Front;
            }
            else
            {
                FlashCardBody = FlashCards[CardIndex].Back;
            }
        }
    }

    public void FlipFlashCard()
    {
        Front = !Front;
        if (Front == true)
        {
            FlashCardSide = "Front";
            ShowButton = "Back";
            FlashCardBody = @FlashCards[CardIndex].Front;
        }
        else
        {
            FlashCardSide = "Back";
            ShowButton = "Front";
            FlashCardBody = @FlashCards[CardIndex].Back;
        }
    }

}



